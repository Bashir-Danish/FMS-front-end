import{d as L,r as p,m as P,o as u,c as r,a as e,E as q,l as T,C as B,J as se,u as o,b as d,w as b,F as D,q as R,D as x,g as $,t as i,I as g,p as z,h as O,_ as G,x as ne}from"./index-a0ab9f59.js";import{D as E,A as M,P as N}from"./PencilOutline-a74d96ef.js";/* empty css                                                                     */import{B as K}from"./baseinput-bef90c50.js";/* empty css                                                                  */const le=k=>(z("data-v-5adc9ccf"),k=k(),O(),k),oe={class:"spec-inputs"},ae=["onSubmit"],ue=["onKeydown"],re=le(()=>e("button",{type:"submit"},"افزدون",-1)),de={key:0},ie=["onClick"],ce=L({__name:"subjectItems",setup(k){const l=p(""),j=p(""),C=p([]),f=P(),c=()=>{var h;l.value&&j.value&&(C.value.push(l.value),C.value.push(j.value),f.subjectItems.unshift(C.value),l.value="",j.value="",C.value=[],(h=window.document.getElementById("firstInput"))==null||h.focus())},S=h=>{f.subjectItems.splice(h,1)};return(h,_)=>(u(),r(D,null,[e("div",oe,[e("form",{onSubmit:q(c,["prevent"])},[T(e("input",{id:"firstInput",type:"text","onUpdate:modelValue":_[0]||(_[0]=m=>l.value=m),required:"",autocomplete:"off"},null,512),[[B,l.value]]),T(e("input",{type:"number","onUpdate:modelValue":_[1]||(_[1]=m=>j.value=m),onKeydown:se(c,["enter"])},null,40,ue),[[B,j.value]]),re],40,ae)]),o(f).subjectItems.length?(u(),r("ul",de,[d(x,{name:"specList",appear:""},{default:b(()=>[(u(!0),r(D,null,R(o(f).subjectItems,m=>(u(),r("li",{key:m},[e("span",null,i(m[0]),1),e("span",null,i(m[1]),1),e("span",{class:"trash",onClick:w=>S(o(f).subjectItems.indexOf(m))},[d(o(g),{color:"red"},{default:b(()=>[d(o(E))]),_:1})],8,ie)]))),128))]),_:1})])):$("",!0)],64))}}),_e=G(ce,[["__scopeId","data-v-5adc9ccf"]]),y=k=>(z("data-v-2578d0a4"),k=k(),O(),k),me={key:0,class:"semester-form-overlay"},pe={class:"semester-form"},ve={key:0},be={key:1},fe={key:2},he={class:"input-groups"},ye={class:"input-group"},ke=y(()=>e("label",{for:"dep"},"دیپارتمنت:",-1)),je={class:"select-o"},Se={key:0,class:"select-ul"},Ce=["onClick"],we=["onClick"],Ie={class:"input-group"},$e=y(()=>e("label",{for:"semester"},"سمستر:",-1)),ge={class:"select-o"},De={key:0,class:"select-ul"},Re=["onClick"],Ve={class:"input-group"},xe=y(()=>e("label",{for:"subject"},"مضامین:",-1)),Te={class:"button-group"},Be={key:3,class:"update-container"},Fe={class:"semester-details-list"},Ue=y(()=>e("p",null,"سمستر",-1)),qe=y(()=>e("p",null,"نوع",-1)),Ee=y(()=>e("p",null,"سال",-1)),Ae=y(()=>e("p",null,"دیپارتمنت",-1)),Me={id:"add-btn"},Ne={key:0,class:"subject-from"},Ke={class:"buttons"},Le={key:1,class:"edit-subject-ul"},Pe=["onClick"],ze=["onClick"],Oe={class:"semesters-list"},Ge={class:"header"},Je=y(()=>e("span",{id:"num"}," شماره ",-1)),He=y(()=>e("span",{id:"name"}," سمستر ",-1)),Qe=y(()=>e("span",{id:"subjects"}," مضامین ",-1)),We={id:"add-sem-buttons"},Xe={class:"list-item-content"},Ye={class:"number"},Ze={class:"semester-details"},et={class:"semester-number"},tt={class:"semester-number"},st={class:"semester-number"},nt={class:"semester-name"},lt={class:"subject-list"},ot=y(()=>e("li",null,[e("p",{class:"subject-name"},"مضمون"),e("p",{class:"subject-credit"},"کردیت")],-1)),at={class:"subject-name"},ut={class:"subject-credit"},rt={class:"edit-sem-buttons"},dt=["onClick"],it=["onClick"],ct=L({__name:"subject",setup(k){const l=P(),j=p(!1),C=p(!1),f=p({department_id:0,semester_id:0,subjects:[]}),c=p({subject_id:0,credit:0,name:"",department_id:0,semester_id:0}),S=p(!1),h=p(!1),_=p([]),m=p(),w=p(!1),V=p(!1),J=n=>{_.value=n,h.value=!0},H=()=>{c.value.name="",c.value.credit=0,w.value=!0},Q=(n,s,a)=>{m.value=n,m.value.department_id=s,m.value.semester_id=a,c.value.name=n.subject_name,c.value.credit=n.credit,V.value=!0},W=async(n,s)=>{if(w.value)try{let a={department_id:n,semester_id:s,name:c.value.name,credit:c.value.credit};await l.addSubjectToRecord(a),w.value=!1,c.value.name="",c.value.credit=0}catch(a){console.error("Error creating user:",a)}else if(m.value&&V.value)try{let a={subject_id:m.value.subject_id,name:c.value.name,credit:c.value.credit,department_id:n,semester_id:s};await l.updateSubject(a),V.value=!1,c.value.name="",c.value.credit=0}catch(a){console.error("Error updating user:",a)}},X=async()=>{if(S.value)try{f.value.subjects=l.subjectItems,await l.createSubject(f.value),F()}catch(n){console.error("Error creating semester:",n)}},Y=async(n,s)=>{if(window.confirm("Are you sure you want to delete this all ?"))try{await l.deleteSubjectsBySemester(n,s)}catch(t){console.log(t)}},Z=async(n,s,a)=>{if(window.confirm("Are you sure you want to delete this subject ?"))try{await l.deleteSubjectById(n,s,a),_.value.subjects.filter(v=>v.subject_id!==n)}catch(v){console.log(v)}},F=()=>{_.value=null,f.value={semester_id:0,department_id:0,subjects:[]},l.departmentSTR="",l.semesterSTR="",l.subjectItems=[],S.value=!1,h.value=!1},U=n=>{const s=["اول","دوم","سوم","چهارم","پنجم","ششم","هفتم","هشتم"];return n>=1&&n<=8?s[n-1]:"نامعلوم"},A=n=>{l.departmentSTR=n.name,f.value.department_id=n.department_id},ee=n=>{l.semesterSTR=n.semester_number+" "+n.name+" "+n.year,f.value.semester_id=n.semester_id};return ne(async()=>{}),(n,s)=>(u(),r("div",null,[S.value||h.value?(u(),r("div",{key:0,class:"dark-container",onClick:F})):$("",!0),d(x,{name:"bounce"},{default:b(()=>{var a;return[S.value||h.value?(u(),r("div",me,[e("div",pe,[S.value?(u(),r("h2",ve,"افزدون مضامین")):$("",!0),h.value?(u(),r("h2",be," ویرایش مضامین")):$("",!0),S.value?(u(),r("form",fe,[e("div",he,[e("div",ye,[ke,e("div",je,[T(e("input",{id:"dep",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>o(l).departmentSTR=t),onFocus:s[1]||(s[1]=t=>C.value=!0),onBlur:s[2]||(s[2]=t=>C.value=!1),placeholder:"دیپارتمنت مربوطه را انتخاب کنید",required:"",autocomplete:"false"},null,544),[[B,o(l).departmentSTR]]),d(x,{name:"list",appear:""},{default:b(()=>[C.value?(u(),r("ul",Se,[(u(!0),r(D,null,R(o(l).departmentData,t=>(u(),r("li",{key:t.department_id,onClick:q(v=>A(t),["self"])},[e("span",{onClick:q(v=>A(t),["self"])},i(t.name),9,we)],8,Ce))),128))])):$("",!0)]),_:1})])]),e("div",Ie,[$e,e("div",ge,[T(e("input",{id:"semester",type:"text","onUpdate:modelValue":s[3]||(s[3]=t=>o(l).semesterSTR=t),onFocus:s[4]||(s[4]=t=>j.value=!0),onBlur:s[5]||(s[5]=t=>j.value=!1),placeholder:"سمستر مربوطه را انتخاب کنید",required:"",autocomplete:"false"},null,544),[[B,o(l).semesterSTR]]),d(x,{name:"list",appear:""},{default:b(()=>[j.value?(u(),r("ul",De,[(u(!0),r(D,null,R(o(l).semesterData,(t,v)=>(u(),r("li",{key:v,onClick:I=>ee(t)},i(U(t.semester_number))+" "+i(t.name)+" "+i(t.year),9,Re))),128))])):$("",!0)]),_:1})])])]),e("div",Ve,[xe,e("div",null,[d(_e)])]),e("div",Te,[e("button",{type:"button",onClick:s[6]||(s[6]=t=>X())},"ذخیره"),e("button",{onClick:F,type:"button"},"لغو")])])):(u(),r("div",Be,[e("ul",Fe,[e("li",null,[Ue,e("p",null,i(U(_.value.semester_number)),1)]),e("li",null,[qe,e("p",null,i(_.value.semester_name),1)]),e("li",null,[Ee,e("p",null,i(_.value.year)+" -ه ش",1)]),e("li",null,[Ae,e("p",null,i((a=o(l).departments.find(t=>t.department_id===_.value.department_id))==null?void 0:a.name),1)])]),e("span",Me,[e("button",{onClick:s[7]||(s[7]=t=>H())},[d(o(g),null,{default:b(()=>[d(o(M))]),_:1})])]),w.value||V.value?(u(),r("form",Ne,[d(K,{modelValue:c.value.name,"onUpdate:modelValue":s[8]||(s[8]=t=>c.value.name=t),"input-type":"text","input-id":"نام:","is-required":!0,placeholder:"نام را وارد کنید"},null,8,["modelValue"]),d(K,{modelValue:c.value.credit,"onUpdate:modelValue":s[9]||(s[9]=t=>c.value.credit=t),"input-type":"number","input-id":"کردیت:","is-required":!0,placeholder:"کردیت را وارد کنید"},null,8,["modelValue"]),e("div",Ke,[e("button",{type:"button",onClick:s[10]||(s[10]=t=>W(_.value.department_id,_.value.semester_id))},i(w.value?"ذخیره":"ویرایش"),1),e("button",{onClick:s[11]||(s[11]=t=>(w.value=!1,V.value=!1)),type:"button"},"لغو")])])):(u(),r("ul",Le,[d(x,{name:"specList"},{default:b(()=>[(u(!0),r(D,null,R(_.value.subjects,t=>(u(),r("li",{key:t},[e("span",null,i(t.subject_name),1),e("span",null,i(t.credit),1),e("span",{class:"edit",onClick:v=>Q(t,_.value.department_id,_.value.semester_id)},[d(o(g),{color:"green"},{default:b(()=>[d(o(N))]),_:1})],8,Pe),e("span",{class:"trash",onClick:v=>Z(t.subject_id,_.value.semester_id,_.value.department_id)},[d(o(g),{color:"red"},{default:b(()=>[d(o(E))]),_:1})],8,ze)]))),128))]),_:1})]))]))])])):$("",!0)]}),_:1}),e("div",Oe,[e("div",Ge,[Je,He,Qe,e("span",We,[e("button",{onClick:s[12]||(s[12]=a=>S.value=!0)},[d(o(g),null,{default:b(()=>[d(o(M))]),_:1})])])]),e("ul",null,[(u(!0),r(D,null,R(o(l).subjectsPageRecord,(a,t)=>{var v;return u(),r("li",{key:t,class:"item"},[e("div",Xe,[e("span",Ye,i(t+1),1),e("div",Ze,[e("p",et," سمستر : "+i(U(a.semester_number)),1),e("p",tt,"نوع : "+i(a.semester_name),1),e("p",st,"سال: "+i(a.year)+" -ه ش",1),e("p",nt,"دیپارتمنت : "+i((v=o(l).departments.find(I=>I.department_id===a.department_id))==null?void 0:v.name),1)]),e("ul",lt,[ot,(u(!0),r(D,null,R(a.subjects,(I,te)=>(u(),r("li",{key:te},[e("p",at,i(I.subject_name),1),e("p",ut,i(I.credit),1)]))),128))]),e("div",rt,[e("button",{onClick:I=>J(a)},[d(o(g),{size:"20",color:"green"},{default:b(()=>[d(o(N))]),_:1})],8,dt),e("button",{onClick:I=>Y(a.semester_id,a.department_id)},[d(o(g),{size:"20",color:"red"},{default:b(()=>[d(o(E))]),_:1})],8,it)])])])}),128))])])]))}});const ft=G(ct,[["__scopeId","data-v-2578d0a4"]]);export{ft as default};
