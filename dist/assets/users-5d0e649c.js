import{d as q,m as A,r as _,x as B,o as l,c as n,g as p,b as u,w as b,a as e,E as F,l as $,G as E,e as C,t as c,D as M,u as r,F as z,q as G,H as L,I as N,p as P,h as H,_ as O}from"./index-1ef64ff7.js";import{u as R}from"./auth-18772d56.js";import{B as k}from"./baseinput-4bbd4a9e.js";import{d as S}from"./dropzone-909b4dd0.js";import{A as Z,P as j,D as J}from"./PencilOutline-7790d348.js";/* empty css                                                                  */const h=y=>(P("data-v-583735d3"),y=y(),H(),y),K={key:0,class:"user-form-overlay"},Q={class:"user-form"},W={key:0},X={key:1},Y={class:"input-groups"},ee={class:"input-group"},se={class:"input-group"},te={class:"input-group"},ae={class:"input-groups"},oe={class:"input-group"},le={class:"input-group"},ue=h(()=>e("label",{for:"number"},"شماره ترم:",-1)),ne=h(()=>e("option",{value:"",disabled:"",selected:""}," نوع کاربر",-1)),ie=h(()=>e("option",{value:"کاربر"},"کاربر",-1)),re=h(()=>e("option",{value:"استاد"},"استاد",-1)),de=[ne,ie,re],pe={class:"image-input"},ce=h(()=>e("label",{for:"image"},"پروفایل",-1)),ve={class:"dropzone"},me={class:"button-group"},_e={class:"users-list"},he={class:"header"},ye=L('<span id="num" data-v-583735d3>شماره</span><span id="user-picture" data-v-583735d3>پروفایل</span><span id="user-name" data-v-583735d3>نام</span><span id="user-email" data-v-583735d3>ایمیل</span><span id="user-type" data-v-583735d3>نوع کاربر</span>',5),fe={id:"add-button"},ge={class:"list-item-content"},we={class:"number"},be={class:"user-picture"},ke=["src"],Ve={key:1},Ne={class:"user-name"},Ue={class:"user-email"},Ce={class:"user-type"},Se={class:"edit-user-buttons"},Ie=["onClick"],De=["onClick"],Te=q({__name:"users",setup(y){const V=A(),v=R(),s=_({name:"",lastName:"",email:"",password:"",picture:null,userType:""}),i=_(!1),d=_(!1),m=_(null),I=o=>{m.value=o,s.value={...o},d.value=!0},f=_(),D=async()=>{if(i.value)try{await v.createUser(s.value),g()}catch(o){console.error("Error creating user:",o)}else if(d.value&&m.value){try{await v.updateUser({user_id:m.value.user_id,name:s.value.name,lastName:s.value.lastName,email:s.value.email,password:s.value.password,picture:s.value.picture,userType:s.value.userType}),g()}catch(o){console.error("Error updating user:",o)}s.value.name="",s.value.lastName="",s.value.email="",s.value.password="",s.value.userType="",s.value.picture=null}},T=async o=>{if(window.confirm("Are you sure you want to delete this user?"))try{await v.deleteUser(o)}catch(t){console.log(t)}},g=()=>{m.value=null,s.value={name:"",lastName:"",email:"",password:"",picture:null,userType:"کاربر"},i.value=!1,d.value=!1,V.File=[]},U=async o=>{f.value=!0;const a=await V.uploadImage("user",o);console.log(o),a!==""&&(s.value.picture=a,f.value=!1,console.log(s.value))};return B(async()=>{await v.getAllUsers()}),(o,a)=>(l(),n("div",null,[i.value||d.value?(l(),n("div",{key:0,class:"dark-container",onClick:g})):p("",!0),u(M,{name:"bounce"},{default:b(()=>[i.value||d.value?(l(),n("div",K,[e("div",Q,[i.value?(l(),n("h2",W,"ایجاد کاربر جدید")):p("",!0),d.value?(l(),n("h2",X,"ویرایش کاربر")):p("",!0),e("form",{onSubmit:a[8]||(a[8]=F(()=>{},["prevent"])),enctype:"multipart/form-data"},[e("div",Y,[e("div",ee,[u(k,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.name=t),"input-type":"text","input-id":"نام:","is-required":!0,placeholder:"نام را وارد کنید"},null,8,["modelValue"])]),e("div",se,[u(k,{modelValue:s.value.lastName,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.lastName=t),"input-type":"text","input-id":"تخلص:","is-required":!0,placeholder:"تخلص را وارد کنید"},null,8,["modelValue"])])]),e("div",te,[u(k,{modelValue:s.value.email,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.email=t),"input-type":"email","input-id":"ایمیل:","is-required":!0,placeholder:"ایمیل را وارد کنید"},null,8,["modelValue"])]),e("div",ae,[e("div",oe,[u(k,{modelValue:s.value.password,"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.password=t),"input-type":"password","input-id":"رمز عبور:","is-required":!0,placeholder:"رمز عبور را وارد کنید"},null,8,["modelValue"])]),e("div",le,[ue,$(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.userType=t),id:"number",required:""},de,512),[[E,s.value.userType]])])]),e("div",pe,[ce,e("div",ve,[i.value?(l(),C(S,{key:0,store:"user",loading:f.value,onSelectImage:a[5]||(a[5]=t=>U())},null,8,["loading"])):p("",!0),d.value?(l(),C(S,{key:1,store:"user",loading:f.value,onSelectImage:a[6]||(a[6]=t=>{var w;return U((w=m.value)==null?void 0:w.user_id)})},null,8,["loading"])):p("",!0)])]),e("div",me,[e("button",{type:"button",onClick:a[7]||(a[7]=t=>D())},c(i.value?"ذخیره":"ویرایش"),1),e("button",{onClick:g,type:"button"},"لغو")])],32)])])):p("",!0)]),_:1}),e("div",_e,[e("div",he,[ye,e("span",fe,[e("button",{onClick:a[9]||(a[9]=t=>i.value=!0)},[u(r(N),null,{default:b(()=>[u(r(Z))]),_:1})])])]),e("ul",null,[(l(!0),n(z,null,G(r(v).users,(t,w)=>(l(),n("li",{key:t.user_id,class:"item"},[e("div",ge,[e("span",we,c(w+1),1),e("div",be,[t.picture?(l(),n("img",{key:0,src:r(V).baseUrl+t.picture,alt:"",srcset:""},null,8,ke)):(l(),n("span",Ve,"No picture"))]),e("p",Ne,c(t.name)+" "+c(t.lastName),1),e("p",Ue,c(t.email),1),e("p",Ce,c(t.userType),1),e("div",Se,[e("button",{onClick:x=>I(t)},[u(r(N),{size:"20",color:"green"},{default:b(()=>[u(r(j))]),_:1})],8,Ie),e("button",{onClick:x=>T(t.user_id)},[u(r(N),{size:"20",color:"red"},{default:b(()=>[u(r(J))]),_:1})],8,De)])])]))),128))])])]))}});const Ee=O(Te,[["__scopeId","data-v-583735d3"]]);export{Ee as default};
