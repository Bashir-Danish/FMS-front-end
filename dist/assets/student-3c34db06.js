import{d as E,m as M,r as v,x as z,o as n,c as o,g as _,b as l,w as b,a as e,E as G,l as U,G as q,F as V,q as w,u,e as B,t as r,D as L,H as P,I as C,p as H,h as O,_ as R}from"./index-9ea00947.js";import{u as T}from"./auth-e1b811be.js";import{B as I}from"./baseinput-574f2780.js";import{d as F}from"./dropzone-b46b649e.js";import{A as Z,P as j,D as J}from"./PencilOutline-a9169b81.js";/* empty css                                                                  */const k=f=>(H("data-v-83817c2a"),f=f(),O(),f),K={key:0,class:"Student-form-overlay"},Q={class:"student-form"},W={key:0},X={key:1},Y={class:"input-groups"},ee={class:"input-group"},te={class:"input-group"},se={class:"st-input-groups"},ae={class:"input-group"},ne={class:"input-group"},oe=k(()=>e("label",{for:"number"},"شماره ترم:",-1)),de=["value"],le={class:"input-group"},ue=k(()=>e("label",{for:"dep"}," دیپارتمنت:",-1)),ie=k(()=>e("option",{value:"",selected:"",disabled:""},"دیپاتمنت",-1)),re=["value"],ce={class:"image-input"},pe=k(()=>e("label",{for:"image"},"پروفایل",-1)),_e={class:"dropzone"},me={class:"button-group"},ve={class:"student-list"},fe={class:"header"},he=P('<span id="num" data-v-83817c2a>شماره</span><span id="student-picture" data-v-83817c2a>پروفایل</span><span id="student-id" data-v-83817c2a>آیدی</span><span id="student-name" data-v-83817c2a>نام</span><span id="student-fname" data-v-83817c2a>نام پدر</span><span id="st-department" data-v-83817c2a>دیپارتمنت</span><span id="st-semester" data-v-83817c2a>سمستر</span>',7),ge={id:"add-button"},ye={class:"list-item-content"},be={class:"number"},ke={class:"student-picture"},Se=["src"],Ve={key:1},we={class:"student-id"},Ce={class:"student-name"},Ie={class:"student-fname"},De={class:"st-department"},xe={class:"st-semester"},Ue={class:"edit-student-buttons"},qe=["onClick"],Be=["onClick"],Fe=E({__name:"student",setup(f){T();const i=M(),h=v(),s=v({student_id:0,name:"",fname:"",ssid:0,department_id:0,picture:"",current_semester:0}),c=v(!1),p=v(!1),m=v(null),$=d=>{m.value=d,s.value={...d},p.value=!0},N=async()=>{if(c.value)try{await i.createStudent(s.value),g()}catch(d){console.error("Error creating user:",d)}else if(p.value&&m.value){try{console.log(s.value),await i.updateStudent({student_id:m.value.student_id,name:s.value.name,fname:s.value.fname,ssid:s.value.ssid,department_id:s.value.department_id,picture:s.value.picture,current_semester:s.value.current_semester}),g()}catch(d){console.error("Error updating user:",d)}s.value.name="",s.value.fname="",s.value.ssid=0,s.value.department_id=0,s.value.current_semester=0}},A=async d=>{if(window.confirm("Are you sure you want to delete this user?"))try{await i.deleteStudent(d)}catch(t){console.log(t)}},g=()=>{m.value=null,s.value={student_id:0,name:"",fname:"",ssid:0,department_id:0,picture:"",current_semester:0},c.value=!1,p.value=!1,i.File=[]},D=async d=>{h.value=!0;const a=await i.uploadImage("student",d);a!==""&&(s.value.picture=a,h.value=!1,console.log(s.value))};return z(async()=>{}),(d,a)=>(n(),o("div",null,[c.value||p.value?(n(),o("div",{key:0,class:"dark-container",onClick:g})):_("",!0),l(L,{name:"bounce"},{default:b(()=>[c.value||p.value?(n(),o("div",K,[e("div",Q,[c.value?(n(),o("h2",W,"ایجاد محصل جدید")):_("",!0),p.value?(n(),o("h2",X,"ویرایش محصل")):_("",!0),e("form",{onSubmit:a[8]||(a[8]=G(()=>{},["prevent"])),enctype:"multipart/form-data"},[e("div",Y,[e("div",ee,[l(I,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.name=t),"input-type":"text","input-id":"نام:","is-required":!0,placeholder:"نام را وارد کنید"},null,8,["modelValue"])]),e("div",te,[l(I,{modelValue:s.value.fname,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.fname=t),"input-type":"text","input-id":"نام پدر:","is-required":!0,placeholder:"نام پدر را وارد کنید"},null,8,["modelValue"])])]),e("div",se,[e("div",ae,[l(I,{modelValue:s.value.ssid,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.ssid=t),"input-type":"number","input-id":"آیدی:","is-required":!0,placeholder:"آیدی را وارد کنید"},null,8,["modelValue"])]),e("div",ne,[oe,U(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.current_semester=t),id:"number",required:""},[(n(),o(V,null,w(8,t=>e("option",{key:t,value:t},r(t),9,de)),64))],512),[[q,s.value.current_semester]])]),e("div",le,[ue,U(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.department_id=t),id:"dep",required:""},[ie,(n(!0),o(V,null,w(u(i).departments,t=>(n(),o("option",{value:t.department_id,key:t.department_id},r(t.name),9,re))),128))],512),[[q,s.value.department_id]])])]),e("div",ce,[pe,e("div",_e,[c.value?(n(),B(F,{key:0,store:"student",loading:h.value,onSelectImage:a[5]||(a[5]=t=>D())},null,8,["loading"])):_("",!0),p.value?(n(),B(F,{key:1,store:"student",loading:h.value,onSelectImage:a[6]||(a[6]=t=>{var y;return D((y=m.value)==null?void 0:y.student_id)})},null,8,["loading"])):_("",!0)])]),e("div",me,[e("button",{type:"button",onClick:a[7]||(a[7]=t=>N())},r(c.value?"ذخیره":"ویرایش"),1),e("button",{onClick:g,type:"button"},"لغو")])],32)])])):_("",!0)]),_:1}),e("div",ve,[e("div",fe,[he,e("span",ge,[e("button",{onClick:a[9]||(a[9]=t=>c.value=!0)},[l(u(C),null,{default:b(()=>[l(u(Z))]),_:1})])])]),e("ul",null,[(n(!0),o(V,null,w(u(i).students,(t,y)=>{var x;return n(),o("li",{key:t.student_id,class:"item"},[e("div",ye,[e("span",be,r(y+1),1),e("div",ke,[t.picture?(n(),o("img",{key:0,src:u(i).baseUrl+t.picture,alt:"",srcset:""},null,8,Se)):(n(),o("span",Ve,"No picture"))]),e("p",we,r(t.ssid),1),e("p",Ce,r(t.name),1),e("p",Ie,r(t.fname),1),e("p",De,r((x=u(i).departments.find(S=>S.department_id===t.department_id))==null?void 0:x.name),1),e("p",xe,r(t.current_semester),1),e("div",Ue,[e("button",{onClick:S=>$(t)},[l(u(C),{size:"20",color:"green"},{default:b(()=>[l(u(j))]),_:1})],8,qe),e("button",{onClick:S=>A(t.student_id)},[l(u(C),{size:"20",color:"red"},{default:b(()=>[l(u(J))]),_:1})],8,Be)])])])}),128))])])]))}});const Ge=R(Fe,[["__scopeId","data-v-83817c2a"]]);export{Ge as default};
