import{d as E,m as M,r as v,y as z,o as n,c as o,h as _,b as l,w as b,a as e,G,n as x,H as B,F as V,s as w,e as u,f as F,t as r,E as L,J as P,I as C,p as j,j as H,_ as J}from"./index-d7679fec.js";import{u as O}from"./auth-66b3de90.js";import{B as I}from"./baseinput-56607181.js";import{d as $}from"./dropzone-6bad95bb.js";import{A as R,P as T,D as Z}from"./PencilOutline-76c0b144.js";/* empty css                                                                  */const k=f=>(j("data-v-1a34ad3e"),f=f(),H(),f),K={key:0,class:"Student-form-overlay"},Q={class:"student-form"},W={key:0},X={key:1},Y={class:"input-groups"},ee={class:"input-group"},te={class:"input-group"},se={class:"st-input-groups"},ae={class:"input-group"},ne={class:"input-group"},oe=k(()=>e("label",{for:"number"},"شماره ترم:",-1)),de=["value"],le={class:"input-group"},ue=k(()=>e("label",{for:"dep"}," دیپارتمنت:",-1)),ie=k(()=>e("option",{value:"",selected:"",disabled:""},"دیپاتمنت",-1)),re=["value"],ce={class:"image-input"},pe=k(()=>e("label",{for:"image"},"پروفایل",-1)),_e={class:"dropzone"},me={class:"button-group"},ve={class:"student-list"},fe={class:"header"},he=P('<span id="num" data-v-1a34ad3e>شماره</span><span id="student-picture" data-v-1a34ad3e>پروفایل</span><span id="student-id" data-v-1a34ad3e>آیدی</span><span id="student-name" data-v-1a34ad3e>نام</span><span id="student-fname" data-v-1a34ad3e>نام پدر</span><span id="st-department" data-v-1a34ad3e>دیپارتمنت</span><span id="st-semester" data-v-1a34ad3e>سمستر</span>',7),ye={id:"add-button"},ge={class:"list-item-content"},be={class:"number"},ke={class:"student-picture"},Se=["src"],Ve={key:1},we={class:"student-id"},Ce={class:"student-name"},Ie={class:"student-fname"},De={class:"st-department"},Ue={class:"st-semester"},xe={class:"edit-student-buttons"},Be=["onClick"],Fe=["onClick"],$e=E({__name:"student",setup(f){O();const i=M(),h=v(),s=v({student_id:0,name:"",fname:"",ssid:0,department_id:0,picture:"",current_semester:0}),c=v(!1),p=v(!1),m=v(null),q=d=>{m.value=d,s.value={...d},p.value=!0},N=async()=>{if(c.value)try{await i.createStudent(s.value),y()}catch(d){console.error("Error creating user:",d)}else if(p.value&&m.value){try{console.log(s.value),await i.updateStudent({student_id:m.value.student_id,name:s.value.name,fname:s.value.fname,ssid:s.value.ssid,department_id:s.value.department_id,picture:s.value.picture,current_semester:s.value.current_semester}),y()}catch(d){console.error("Error updating user:",d)}s.value.name="",s.value.fname="",s.value.ssid=0,s.value.department_id=0,s.value.current_semester=0}},A=async d=>{if(window.confirm("Are you sure you want to delete this user?"))try{await i.deleteStudent(d)}catch(t){console.log(t)}},y=()=>{m.value=null,s.value={student_id:0,name:"",fname:"",ssid:0,department_id:0,picture:"",current_semester:0},c.value=!1,p.value=!1,i.File=[]},D=async d=>{h.value=!0;const a=await i.uploadImage("student",d);a!==""&&(s.value.picture=a,h.value=!1,console.log(s.value))};return z(async()=>{}),(d,a)=>(n(),o("div",null,[c.value||p.value?(n(),o("div",{key:0,class:"dark-container",onClick:y})):_("",!0),l(L,{name:"bounce"},{default:b(()=>[c.value||p.value?(n(),o("div",K,[e("div",Q,[c.value?(n(),o("h2",W,"ایجاد محصل جدید")):_("",!0),p.value?(n(),o("h2",X,"ویرایش محصل")):_("",!0),e("form",{onSubmit:a[8]||(a[8]=G(()=>{},["prevent"])),enctype:"multipart/form-data"},[e("div",Y,[e("div",ee,[l(I,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.name=t),"input-type":"text","input-id":"نام:","is-required":!0,placeholder:"نام را وارد کنید"},null,8,["modelValue"])]),e("div",te,[l(I,{modelValue:s.value.fname,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.fname=t),"input-type":"text","input-id":"نام پدر:","is-required":!0,placeholder:"نام پدر را وارد کنید"},null,8,["modelValue"])])]),e("div",se,[e("div",ae,[l(I,{modelValue:s.value.ssid,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.ssid=t),"input-type":"number","input-id":"آیدی:","is-required":!0,placeholder:"آیدی را وارد کنید"},null,8,["modelValue"])]),e("div",ne,[oe,x(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.current_semester=t),id:"number",required:""},[(n(),o(V,null,w(8,t=>e("option",{key:t,value:t},r(t),9,de)),64))],512),[[B,s.value.current_semester]])]),e("div",le,[ue,x(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.department_id=t),id:"dep",required:""},[ie,(n(!0),o(V,null,w(u(i).departments,t=>(n(),o("option",{value:t.department_id,key:t.department_id},r(t.name),9,re))),128))],512),[[B,s.value.department_id]])])]),e("div",ce,[pe,e("div",_e,[c.value?(n(),F($,{key:0,store:"student",loading:h.value,onSelectImage:a[5]||(a[5]=t=>D())},null,8,["loading"])):_("",!0),p.value?(n(),F($,{key:1,store:"student",loading:h.value,onSelectImage:a[6]||(a[6]=t=>{var g;return D((g=m.value)==null?void 0:g.student_id)})},null,8,["loading"])):_("",!0)])]),e("div",me,[e("button",{type:"button",onClick:a[7]||(a[7]=t=>N())},r(c.value?"ذخیره":"ویرایش"),1),e("button",{onClick:y,type:"button"},"لغو")])],32)])])):_("",!0)]),_:1}),e("div",ve,[e("div",fe,[he,e("span",ye,[e("button",{onClick:a[9]||(a[9]=t=>c.value=!0)},[l(u(C),null,{default:b(()=>[l(u(R))]),_:1})])])]),e("ul",null,[(n(!0),o(V,null,w(u(i).students,(t,g)=>{var U;return n(),o("li",{key:t.student_id,class:"item"},[e("div",ge,[e("span",be,r(g+1),1),e("div",ke,[t.picture?(n(),o("img",{key:0,src:u(i).baseUrl+t.picture,alt:"",srcset:""},null,8,Se)):(n(),o("span",Ve,"No picture"))]),e("p",we,r(t.ssid),1),e("p",Ce,r(t.name),1),e("p",Ie,r(t.fname),1),e("p",De,r((U=u(i).departments.find(S=>S.department_id===t.department_id))==null?void 0:U.name),1),e("p",Ue,r(t.current_semester),1),e("div",xe,[e("button",{onClick:S=>q(t)},[l(u(C),{size:"20",color:"green"},{default:b(()=>[l(u(T))]),_:1})],8,Be),e("button",{onClick:S=>A(t.student_id)},[l(u(C),{size:"20",color:"red"},{default:b(()=>[l(u(Z))]),_:1})],8,Fe)])])])}),128))])])]))}});const Ge=J($e,[["__scopeId","data-v-1a34ad3e"]]);export{Ge as default};
